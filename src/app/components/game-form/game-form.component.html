<div class="container">
  <div class="header">
    <h2>{{ isEditMode ? 'Edit Game' : 'Add New Game' }}</h2>
    <button class="btn btn-secondary" (click)="onCancel()">Back to Games</button>
  </div>

  <div class="error-message" *ngIf="error">
    {{ error }}
  </div>

  <div class="loading" *ngIf="loading">
    Loading game details...
  </div>

  <form [formGroup]="gameForm" (ngSubmit)="onSubmit()" *ngIf="!loading" class="game-form">
    <div class="form-row">
      <div class="form-group">
        <label for="name">Game Name *</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          [class.error]="getFieldError('name')"
          placeholder="Enter game name">
        <div class="error-text" *ngIf="getFieldError('name')">
          {{ getFieldError('name') }}
        </div>
      </div>

      <div class="form-group">
        <label for="year">Release Year *</label>
        <input
          type="number"
          id="year"
          formControlName="year"
          class="form-control"
          [class.error]="getFieldError('year')"
          placeholder="2024">
        <div class="error-text" *ngIf="getFieldError('year')">
          {{ getFieldError('year') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="publisherId">Publisher *</label>
        <select
          id="publisherId"
          formControlName="publisherId"
          class="form-control"
          [class.error]="getFieldError('publisherId')">
          <option value="">Select Publisher</option>
          <option *ngFor="let publisher of publishers" [value]="publisher.id">
            {{ publisher.name }}
          </option>
        </select>
        <div class="error-text" *ngIf="getFieldError('publisherId')">
          {{ getFieldError('publisherId') }}
        </div>
      </div>

      <div class="form-group">
        <label for="consoleId">Console *</label>
        <select
          id="consoleId"
          formControlName="consoleId"
          class="form-control"
          [class.error]="getFieldError('consoleId')">
          <option value="">Select Console</option>
          <option *ngFor="let console of consoles" [value]="console.id">
            {{ console.name }}
          </option>
        </select>
        <div class="error-text" *ngIf="getFieldError('consoleId')">
          {{ getFieldError('consoleId') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="genreId">Genre *</label>
        <select
          id="genreId"
          formControlName="genreId"
          class="form-control"
          [class.error]="getFieldError('genreId')">
          <option value="">Select Genre</option>
          <option *ngFor="let genre of genres" [value]="genre.id">
            {{ genre.name }}
          </option>
        </select>
        <div class="error-text" *ngIf="getFieldError('genreId')">
          {{ getFieldError('genreId') }}
        </div>
      </div>

      <div class="form-group">
        <label for="quantity">Quantity *</label>
        <input
          type="number"
          id="quantity"
          formControlName="quantity"
          class="form-control"
          [class.error]="getFieldError('quantity')"
          min="0"
          placeholder="0">
        <div class="error-text" *ngIf="getFieldError('quantity')">
          {{ getFieldError('quantity') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group full-width">
        <label for="price">Price ($) *</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          class="form-control"
          [class.error]="getFieldError('price')"
          min="0"
          step="0.01"
          placeholder="0.00">
        <div class="error-text" *ngIf="getFieldError('price')">
          {{ getFieldError('price') }}
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="saving">
        {{ saving ? 'Saving...' : (isEditMode ? 'Update Game' : 'Add Game') }}
      </button>
    </div>
  </form>
</div>
